# Scenario: Get degraded context then draft note.

name: context_degraded_then_draft
description: >
  Multi-step: get context with vitals_fetch_failed warning for Jane Smith,
  then draft a brief note acknowledging the limitation.

tools:
  get_encounter_context:
    _default:
      encounter:
        id: 900002
        date: "2026-02-24 10:00:00"
        reason: "Annual wellness exam"
        provider:
          name: "Administrator Administrator"
          id: 1
        facility:
          name: "Your Clinic Name Here"
          id: 3
        class_code: "AMB"
        status: "Established Patient"
      patient:
        id: 90002
        name: "Jane Smith"
        dob: "1990-07-22"
        sex: "Female"
        mrn: "TEST002"
      clinical_context:
        active_problems: []
        medications: []
        allergies: []
        vitals: {}
        existing_notes: []
      billing_status:
        has_dx_codes: false
        has_cpt_codes: false
        dx_codes: []
        cpt_codes: []
        billing_note: ""
        last_level_billed: "0"
        last_level_closed: "0"
      data_warnings:
        - "vitals_fetch_failed"

  draft_encounter_note:
    _default:
      draft_note:
        type: "brief"
        content:
          summary: >-
            Jane Smith, 35F, presents for annual wellness exam.
            Note: Vitals data was unavailable. No active problems documented.
        full_text: >-
          Jane Smith, 35F, annual wellness exam. Vitals unavailable.
          No active problems, medications, or allergies on file.
        encounter_id: 900002
        patient_name: "Jane Smith"
        generated_at: "2026-02-24T11:00:00+00:00"
      warnings:
        - "Vitals data unavailable"
      data_warnings:
        - "vitals_fetch_failed"
      disclaimer: "This is an AI-generated draft. Review and edit before saving."
