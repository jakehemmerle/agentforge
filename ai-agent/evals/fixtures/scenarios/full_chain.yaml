# Scenario: Full chain â€” find appointments, get context, draft note.

name: full_chain
description: >
  Multi-step scenario: find John Doe's yesterday appointments, then
  draft a SOAP note for that encounter. Agent calls find_appointments,
  get_encounter_context, and draft_encounter_note in sequence.

tools:
  find_appointments:
    _default:
      appointments:
        - appointment_id: 1003
          patient_name: "John Doe"
          patient_id: 90001
          provider_name: "Administrator Administrator"
          date: "2026-02-23"
          start_time: "10:00:00"
          end_time: "10:15:00"
          status: ">"
          status_label: "Checked out"
          category: "Office Visit"
          facility: "Your Clinic Name Here"
          reason: "Persistent cough evaluation"
      total_count: 1

  get_encounter_context:
    _default:
      encounter:
        id: 900001
        date: "2026-02-23 10:00:00"
        reason: "Persistent cough for 3 days with low-grade fever"
        provider:
          name: ""
          id: 1
        facility:
          name: "Your Clinic Name Here"
          id: 3
        class_code: "AMB"
        status: "Office Visit"

      patient:
        id: 90001
        name: "John Doe"
        dob: "1985-03-15"
        sex: "Male"
        mrn: "TEST001"

      clinical_context:
        active_problems:
          - code: "E11.9"
            description: "Type 2 diabetes mellitus without complications"
            onset_date: "2020-06-15"
        medications:
          - drug_name: "Metformin"
            dose: "500 mg"
            frequency: "twice daily"
        allergies:
          - substance: "Penicillin"
            reaction: "Rash"
            severity: "moderate"
        vitals:
          temp: "99.8"
          bp: "128/82"
          hr: "76"
          rr: "16"
          spo2: "98"
          weight: "180"
          height: "70"
        existing_notes:
          - type: "SOAP"
            date: "2026-02-23 10:00:00"
            summary: >-
              SUBJECTIVE: Patient reports persistent cough for 3 days with
              low-grade fever.;
              OBJECTIVE: Temp 99.8F, BP 128/82, HR 76, RR 16, SpO2 98%.;
              ASSESSMENT: Acute upper respiratory infection (J06.9);
              PLAN: Rest and adequate fluids. Follow up in 1 week.

      billing_status:
        has_dx_codes: false
        has_cpt_codes: false
        dx_codes: []
        cpt_codes: []
        billing_note: ""
        last_level_billed: "0"
        last_level_closed: "0"

      data_warnings: []

  draft_encounter_note:
    _default:
      draft_note:
        type: "SOAP"
        content:
          subjective: "Patient reports persistent cough for 3 days with low-grade fever."
          objective: "Temp 99.8F, BP 128/82, HR 76, RR 16, SpO2 98%."
          assessment: "Acute upper respiratory infection (J06.9)"
          plan: "Rest and adequate fluids. Follow up in 1 week."
        full_text: >-
          S: Patient reports persistent cough for 3 days with low-grade fever.

          O: Temp 99.8F, BP 128/82, HR 76, RR 16, SpO2 98%.

          A: Acute upper respiratory infection (J06.9)

          P: Rest and adequate fluids. Follow up in 1 week.
        encounter_id: 900001
        patient_name: "John Doe"
        generated_at: "2026-02-23T12:00:00+00:00"
      warnings: []
      data_warnings: []
      disclaimer: "This is an AI-generated draft. Review and edit before saving."
